[phases.setup]
nix_pkgs = [
  "python310",
  "python310Packages.pip",
  "python310Packages.setuptools",
  "python310Packages.wheel",
  "python310Packages.virtualenv",
  "python310Packages.faiss",
  "pkgconfig",
  "openblas",
  "libsndfile",
  "ffmpeg"
]

[phases.install]
commands = [
  "pip install --upgrade pip",
  "pip install -r requirements.txt"
]

[phases.build]
commands = []

[phases.start]
commands = ["gunicorn app:app --bind 0.0.0.0:${PORT}"]
